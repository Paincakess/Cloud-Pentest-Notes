---
title: DynamoDB
updated: 2022-12-30 06:58:45Z
created: 2022-12-27 09:47:03Z
latitude: 27.71724530
longitude: 85.32396050
altitude: 0.0000
---

Amazon DynamoDB is a fully managed, serverless, key-value NoSQL database designed to run high-performance applications at any scale. 

## Table Enumeration
- List tables
	- `aws dynamodb list-tables`
- Get table's metadata 
	- `aws dynamodb describe-table --table-name <table_name>`
- Check if point in time recovery is enabled
	- `aws dynamodb describe-continuous-backups --table-name <table_name>`
- Get 1 example of the indicated attribute to learn its type
	- `aws dynamodb scan --table products --projection-expression "attribute" --max-items 1`

## Reading Contents Inside the Table
- Get data Inside the Table
	- `aws dynamodb scan --table-name <table_name>`
- Querying with Table Example
	- `aws dynamodb query --table-name <table_name> --projection-expression "SongTitle" --key-condition-expression "Artist = :v1" --expression-attribute-values file://expression-attributes.json --return-consumed-capacity TOTAL`

## Writing Contents in Table
- Putting data in table (XSS)
	- `aws dynamodb put-item --table <table_name> --item file://add.json`
	- Json Example
	```
		{
   "Id": {
      "S": "1000"
   },
   "Name": {
      "S":  "Marc"
   },
   "Description": {
       "S": "<script>alert(1)</script>"
   }
	}
	```

- Updating data in table (XSS)
	- `aws dynamodb update-item --table <table_name> --key file://key.json --update-expression "SET Description = :value" --expression-attribute-values file://val.json`
	- `Key.json` file example
	```
	{
    "Id": {
        "S": "1000"
    }
	}
	```
	- `val.json` file example 
	```
	{
    ":value": {
        "S": "<script>alert(1)</script>"
    }
	}
	```

## Backups
- List Backups
	- `aws dynamodb list-backups`
- Get details about the backup
	- `aws dynamodb describe-backup --backup-arn <arn>`
- Backup of table
	- `aws dynamodb describe-continuous-backups --table-name <table_name>`

## Global Tables
- List global Tables
	- `aws dynamodb list-global-tables`
- Get more details about global tables
	- `aws dynamodb describe-global-table --global-table-name <table_name>`

## Exports
- List Exports
	- `aws dynamodb list-exports`
- More details about the export
	- `aws dynamodb describe-export --export-arn <arn>`

## Endpoints
- Describe Endpoints
	- `aws dynamodb describe-endpoints`

# For GUI
There is a GUI for local Dynamo services like `DynamoDB Local`, `dynalite`, `localstack`, etc, that could be useful: [dynamodb-admin](https://github.com/aaronshaf/dynamodb-admin).

# Exploits
## SQL Injection
There are ways to access DynamoDB data with SQL syntax, therefore, typical SQL injections are also possible.

## NoSQL Injection
In DynamoDB different conditions can be used to retrieve data, like in a common NoSQL Injection if it's possible to chain more conditions to retrieve data you could obtain hidden data (or dump the whole table)

## Raw JSON Injection
DynamoDB accepts JSON objects to search for data inside the DB. If you find that you can write in the json object sent to search, you could make the DB dump, all the contents.

For example, injecting request like,
`'{"Id": {"ComparisonOperator": "EQ","AttributeValueList": [{"N": "' + user_input + '"}]}}'`

Attacker can inject something like this:
`1000"}],"ComparisonOperator": "GT","AttributeValueList": [{"N": "0`

*fix the "EQ" condition searching for the ID 1000 and then looking for all the data with a Id string greater and 0, which is all*